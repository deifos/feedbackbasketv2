<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Feedback Widget Test</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 40px;
        background-color: #f9fafb;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 40px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #1f2937;
        margin-bottom: 20px;
      }
      p {
        color: #6b7280;
        margin-bottom: 20px;
      }
      .test-section {
        background: #f3f4f6;
        padding: 20px;
        border-radius: 6px;
        margin: 20px 0;
      }
      .test-section h3 {
        margin-top: 0;
        color: #374151;
      }
      button {
        background: #3b82f6;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #2563eb;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Feedback Widget Test Page</h1>
      <p>
        This page is used to test the feedback widget functionality. The widget should appear as a
        button in the bottom-right corner of the page.
      </p>

      <div class="test-section">
        <h3>Widget Features to Test:</h3>
        <ul>
          <li>✅ Widget button appears in bottom-right corner</li>
          <li>✅ Button has custom color and styling</li>
          <li>✅ Clicking button opens feedback modal</li>
          <li>✅ Modal has proper form fields (feedback text and email)</li>
          <li>✅ Form validation works (required feedback text)</li>
          <li>✅ Modal can be closed with X button, Cancel button, or clicking outside</li>
          <li>✅ Escape key closes the modal</li>
          <li>✅ Form submission shows loading state</li>
          <li>✅ Success message appears after submission</li>
          <li>✅ Modal auto-closes after success</li>
        </ul>
      </div>

      <div class="test-section">
        <h3>Test Different Configurations:</h3>
        <button onclick="testDifferentColors()">Test Different Colors</button>
        <button onclick="testDifferentPositions()">Test Different Positions</button>
        <button onclick="testCustomLabels()">Test Custom Labels</button>
        <button onclick="resetWidget()">Reset to Default</button>
      </div>

      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut
        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
        laboris nisi ut aliquip ex ea commodo consequat.
      </p>

      <p>
        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
        pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt
        mollit anim id est laborum.
      </p>
    </div>

    <!-- Load the feedback widget -->
    <script src="/widget/feedback-widget.js"></script>

    <script>
      // Initialize the widget with test configuration
      window.FeedbackWidget.init({
        projectId: 'test-project-id',
        apiEndpoint: '/api/widget/feedback',
        buttonColor: '#3b82f6',
        buttonRadius: 8,
        buttonLabel: 'Feedback',
        successMessage: 'Thank you for your feedback!',
      });

      // Test functions
      function testDifferentColors() {
        window.FeedbackWidget.destroy();
        window.FeedbackWidget.init({
          projectId: 'test-project-id',
          apiEndpoint: '/api/widget/feedback',
          buttonColor: '#10b981', // Green
          buttonRadius: 8,
          buttonLabel: 'Send Feedback',
          successMessage: 'Thanks! We appreciate your input.',
        });
      }

      function testDifferentPositions() {
        window.FeedbackWidget.destroy();
        window.FeedbackWidget.init({
          projectId: 'test-project-id',
          apiEndpoint: '/api/widget/feedback',
          buttonColor: '#f59e0b', // Orange
          buttonRadius: 20,
          buttonLabel: 'Help Us',
          successMessage: 'Your feedback helps us improve!',
          position: 'bottom-left',
        });
      }

      function testCustomLabels() {
        window.FeedbackWidget.destroy();
        window.FeedbackWidget.init({
          projectId: 'test-project-id',
          apiEndpoint: '/api/widget/feedback',
          buttonColor: '#8b5cf6', // Purple
          buttonRadius: 4,
          buttonLabel: 'Share Thoughts',
          successMessage: 'Got it! Thanks for sharing your thoughts with us.',
        });
      }

      function resetWidget() {
        window.FeedbackWidget.destroy();
        window.FeedbackWidget.init({
          projectId: 'test-project-id',
          apiEndpoint: '/api/widget/feedback',
          buttonColor: '#3b82f6',
          buttonRadius: 8,
          buttonLabel: 'Feedback',
          successMessage: 'Thank you for your feedback!',
        });
      }
    </script>
  </body>
</html>
